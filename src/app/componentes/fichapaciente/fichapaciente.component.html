<app-wait-icon *ngIf="loading"></app-wait-icon>
<div class="container-fluid mt-3" id="cabecalho">
  <div class="row mt-3">
    <div class="col-12 text-center">
      <h3>Ficha do Paciente</h3>
    </div>
  </div>

  <ul class="nav">
    <li class="nav-item">
      <span class="nav-link" (click)="scroll('infoBasica')"
        >Informações Básicas</span
      >
    </li>
    <li class="nav-item">
      <span class="nav-link" (click)="scroll('diagnosticoClinico')"
        >Diagnóstico Clínico</span
      >
    </li>
    <li class="nav-item">
      <span class="nav-link" (click)="scroll('queixaPrinciapal')">Queixa</span>
    </li>
    <li class="nav-item">
      <span class="nav-link" (click)="scroll('hmphma')">HMP/HMA</span>
    </li>
    <li class="nav-item">
      <span class="nav-link" (click)="scroll('medicacoes')">Medicações</span>
    </li>
    <li class="nav-item">
      <span class="nav-link" (click)="scroll('examesComplementares')"
        >Exames Complementares</span
      >
    </li>
    <li class="nav-item">
      <span class="nav-link" (click)="scroll('exameFisico')">Exame Fisico</span>
    </li>
    <li class="nav-item">
      <span class="nav-link" (click)="scroll('condutaClinica')"
        >Conduta Clínica</span
      >
    </li>
    <li class="nav-item">
      <span class="nav-link" (click)="scroll('diagnostico')">Diagnóstico</span>
    </li>
    <li class="nav-item">
      <span class="nav-link" (click)="scroll('midias')">Mídias</span>
    </li>
  </ul>
</div>

<div class="container">
  <!-- Informações Básicas da Ficha -->
  <section id="infoBasica">
    <h4>Informações Básicas</h4>
    <div class="row">
      <div class="col-8">
        <div class="row">
          <div class="col-12">
            <label class="mt-1" for="txtNome">Nome do Paciente</label>
            <input type="text" class="form-control" id="txtNome" [(ngModel)]="ficha.nomePaciente"/>
          </div>
        </div>
        <div class="row">
          <div class="col-4">
            <label class="mt-1" for="txtSexo">Sexo</label>
            <select id="txtSexo" class="form-control" [(ngModel)]="ficha.sexo">
              <option value="Default">Clique para selecionar</option>
              <option value="M">Masculino</option>
              <option value="F">Feminino</option>
              <option value="X">Prefior não informar</option>
            </select>
          </div>
          <div class="col-4">
            <label for="txtDataNascimento">Data Nascimento</label>
            <input type="date" id="txtDataNascimento" class="form-control" [(ngModel)]="ficha.dataNascimento">
          </div>
          <div class="col-4">
            <label class="mt-1" for="txtCep">CEP</label>
            <input type="text" id="txtCep" class="form-control" (keyup.enter)="buscarCep()" [(ngModel)]="ficha.cep"/>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <label for="txtEndereco">Endereço</label>
            <input type="text" id="txtEndereco" class="form-control" [(ngModel)]="ficha.endereco"/>
          </div>
        </div>
        <div class="row">
          <div class="col-4">
            <label for="txttxtNumeroComplemento">Número</label>
            <input type="text" id="txttxtNumeroComplemento" class="form-control" [(ngModel)]="ficha.numeroComplemento"/>
          </div>
          <div class="col-6">
            <label for="txtCidade">Cidade</label>
            <input type="text" id="txtCidade" class="form-control" [(ngModel)]="ficha.cidade"/>
          </div>
          <div class="col-2">
            <label for="txtUF">UF</label>
            <select id="txtUF" class="form-control" [(ngModel)]="ficha.estado">
              <option value="Default">Clique para selecionar</option>
              <option value="AC">AC</option>
              <option value="AL">AL</option>
              <option value="AM">AP</option>
              <option value="AM">AM</option>
              <option value="BA">BA</option>
              <option value="DF">DF</option>
              <option value="CE">CE</option>
              <option value="ES">ES</option>
              <option value="GO">GO</option>
              <option value="MA">MA</option>
              <option value="MT">MT</option>
              <option value="MS">MS</option>
              <option value="MG">MG</option>
              <option value="PA">PA</option>
              <option value="PB">PB</option>
              <option value="PR">PR</option>
              <option value="PE">PE</option>
              <option value="PI">PI</option>
              <option value="RJ">RJ</option>
              <option value="RN">RN</option>
              <option value="RS">RS</option>
              <option value="RO">RO</option>
              <option value="RR">RR</option>
              <option value="SC">SC</option>
              <option value="SP">SP</option>
              <option value="SE">SE</option>
              <option value="TO">TO</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <label for="txtOcupacao">Ocupação</label>
            <input type="text" id="txtOcupacao" class="form-control" [(ngModel)]="ficha.ocupacao"/>
          </div>
        </div>
      </div>
      <div class="col-4 text-center">
        <img id="foto" [src]="ficha.linkFoto" width="80%" />
        <button class="btn btn-success" (click)="chamarUpload()">Enviar Foto</button>
      </div>
    </div>
  </section>

  <!-- Diagnóstico Clínico -->
  <section id="diagnosticoClinico">
    <h4>Diagnóstico Clinico</h4>
    <div class="row">
      <div class="col-12">
        <label for="txtDiagnosticoClinico">Descreva o Diagnóstico Clínico</label>
        <textarea class="form-control" id="txtDiagnosticoClinico" [(ngModel)]="ficha.diagnosticoClinico"></textarea>
      </div>
    </div>
  </section>

  <!-- Queixa Principal -->
  <section id="queixaPrinciapal">
    <h4>Queixa Principal</h4>
    <div class="row">
      <div class="col-12">
        <label for="txtQueixaPrincipal">Descreva a Queixa Principal</label>
        <textarea class="form-control" id="txtQueixaPrincipal" [(ngModel)]="ficha.queixaPrincipal"></textarea>
      </div>
    </div>
  </section>

  <!-- HMP e HMA -->
  <section id="hmphma">
    <h4>HMP/HMA</h4>
    <div class="row">
      <div class="col-12">
        <label for="txtHmpHma">Descreva HMP e HMA</label>
        <textarea class="form-control" id="txtHmpHma" [(ngModel)]="ficha.hmpHma"></textarea>
      </div>
    </div>
  </section>

  <!-- Medicações -->
  <section id="medicacoes">
    <h4>Medicações</h4>
    <div class="row">
      <div class="col-12">
        <label for="txtMedicacoes">Descreva as Medicações</label>
        <textarea class="form-control" id="txtMedicacoes" [(ngModel)]="ficha.medicacoes" ></textarea>
      </div>
    </div>
  </section>

  <!-- Exames Complementares -->
  <section id="examesComplementares">
    <h4>Exames Complementares</h4>
    <div class="row">
      <div class="col-12">
        <label for="txtExamesComplementares"
          >Descreva os Exames Complementares</label
        >
        <textarea class="form-control" id="txtExamesComplementares" [(ngModel)]="ficha.examesComplementares"></textarea>
      </div>
    </div>
  </section>

  <!-- Exame Físico -->
  <section id="exameFisico">
    <h4>Exame Físico</h4>
    <div class="row">
      <div class="col-12">
        <label for="txtFisico">Descreva o Exame Físico</label>
        <textarea class="form-control" id="txtFisico" [(ngModel)]="ficha.exameFisico"></textarea>
      </div>
    </div>
  </section>

  <!-- Conduta Clínica -->
  <section id="condutaClinica">
    <h4>Conduta Clínica</h4>
    <div class="row">
      <div class="col-12">
        <label for="txtCondutaClinica">Descreva a Conduta Clínica</label>
        <textarea class="form-control" id="txtCondutaClinica" [(ngModel)]="ficha.condutaClinica"></textarea>
      </div>
    </div>
  </section>

  <!-- Diagnóstico -->
  <section id="diagnostico">
    <h4>Diagnóstico</h4>
    <div class="row">
      <div class="col-12">
        <label for="txtDiagnostico">Descreva o Diagnóstico</label>
        <textarea class="form-control" id="txtDiagnostico" [(ngModel)]="ficha.diagnostico"></textarea>
      </div>
    </div>
  </section>

  <!-- Mídias -->
  <section id="midias">
    <h4>Mídias Disponíveis</h4>
    <div class="row">
      <div class="col-12">
        <button class="btn btn-success" (click)="chamarUpload()">Adicionar Foto/Vídeo</button>
      </div>
    </div>
  </section>
</div>

<button id="salvar" class="btn btn-success" (click)="salvarFicha()"><i class="fa-regular fa-2x fa-floppy-disk"></i></button>

<button id="voltar" class="btn btn-success" (click)="voltarParaPaginaAnterior()"><i class="fa-solid fa-2x fa-circle-arrow-left"></i></button>


<!-- MODAL PARA MENSAGEM DE RETORNO -->

<!-- Button trigger modal -->
<button type="button" style="visibility: hidden;" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalAlerta" id="btnModalAlerta">
  Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="modalAlerta" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Mensagem</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        {{ mensagemModal }}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
      </div>
    </div>
  </div>
</div>

<!-- MODAL PARA UPLOADS -->
<button type="button" style="visibility: hidden;" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#ModalUpload" id="btnModalUpload">
  Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="ModalUpload" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">Selecione o Arquivo</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <input type="file" id="fileName" class="form-control" (change)="realizarUpload($event)">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
      </div>
    </div>
  </div>
</div>